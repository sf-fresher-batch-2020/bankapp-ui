<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking App</title>
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"       crossorigin="anonymous">

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"        
        crossorigin="anonymous"></script>
        <link rel="stylesheet" href="assets/css/style.css"></link>
</head>

<body>
    <header id="header">
        <!-- Load Header content-->
    </header>
    <main class="container-fluid">        
        <div id="page-content">
            <!-- Developed by Ishwarya-->
            <form action="fund transfer" method="post" onsubmit="fundtransfer()">
                <label>payee-name</label>
                <select name="payee" id="payee" required>
                    <option value="">--PLEASE SELECT --</option>
                    <option value="1">sowmiya-001</option>
                    <option value="2">abi-002</option>
                </select>
                <br/>
                <br/>
                <label>amount</label>
                <input type="number" name="amount" id="amount" min="1" required/></br>
                <label>comment</label>
                <textarea name="comment" id="comment" rows="3" cols="20">Enter text here.....</textarea></br>
                <button type="submit">fundtransfer</button>
            </form>
        
        </div>
    </main>
    <script>
        $("#header").load("components/_header.html");
        function fundtransfer(){
            event.preventDefault();
            alert("Successfully submitted");
            var amount=document.getElementById("amount").value;
            var comment=document.querySelector("#comment").value;
            var payee = document.getElementById("payee").value;
            console.log("amount:" + amount + ",comment:" + comment + ",payee:" + payee);
            let obj = {"payee" : payee, "amount" : amount, "comment" : comment};
            console.log(obj);
            let results = sendDatatoBackend(obj);
            console.log("Results from Backend:" , results);
        }
        function sendDatatoBackend(userdetails){
            console.log("sending Data to backend, userdetails");
            let results = "sucess";
            var transfer = [];
            var usersTemp = JSON.parse(localStorage.getItem("USERS"));
            var users = usersTemp ? usersTemp : [];
            transfer.push(obj);
            localStorage.setItem("TRANSFER",JSON.stringify(transfer));
            var transfer=JSON.parse(localStorage.getItem("TRANSFER"));
            
            return results;
        }
        
        
       
        
    </script>
</body>

</html>
